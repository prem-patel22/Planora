<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ venue.venue_name }} - Details</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary: #1a2e35;
            --secondary: #3a506b;
            --accent: #c8a97e;
            --green: #397B53;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        
        .venue-header {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        {% if venue.image %}url('{{ venue.image.url }}'){% else %}url('https://via.placeholder.com/1920x400/CCCCCC/666666?text=Venue+Image'){% endif %};
            background-size: cover;
            background-position: center;
            color: white;
            padding: 80px 0 40px;
            margin-bottom: 30px;
        }
        
        .section-title {
            color: var(--primary);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            height: 100%;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-img-top {
            height: 200px;
            object-fit: cover;
            border-radius: 10px 10px 0 0;
        }
        
        .price-badge {
            background-color: var(--accent);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .btn-primary-custom {
            background-color: var(--accent);
            border: none;
            color: white;
        }
        
        .btn-primary-custom:hover {
            background-color: #b69566;
            color: white;
        }
        
        .amenities-list {
            list-style: none;
            padding: 0;
        }
        
        .amenities-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .amenities-list li:last-child {
            border-bottom: none;
        }
        
        .amenities-list i {
            color: var(--accent);
            margin-right: 10px;
        }
        
        /* Additional styles for fallback options */
        .fallback-option {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .fallback-option:hover {
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .selected-option {
            border: 2px solid var(--accent) !important;
            box-shadow: 0 0 20px rgba(200, 169, 126, 0.3);
        }
        
        .btn-success-custom {
            background-color: var(--green);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-success-custom:hover {
            background-color: #2d5f3e;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{% url 'index' %}">SmartPlot</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'index' %}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'search_venues' %}">Search</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'your_booking' %}">Your Booking</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Venue Header -->
    <div class="venue-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-4">{{ venue.venue_name }}</h1>
                    <p class="lead">{{ venue.location }}</p>
                    <div class="d-flex gap-3 mb-3">
                        <span><i class="fas fa-users me-1"></i> Capacity: {{ venue.capacity }} guests</span>
                        <span><i class="fas fa-rupee-sign me-1"></i> {{ venue.pricing }}</span>
                        <span><i class="fas fa-check-circle me-1"></i> Available</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Venue Description -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="section-title">About This Venue</h3>
                <p class="lead">{{ venue.description|default:"No description available." }}</p>
                
                <h5 class="mt-4">Amenities:</h5>
                <div class="row">
                    {% if venue.amenities %}
                    <div id="amenities-container">
                        <p>{{ venue.amenities }}</p>
                    </div>
                    {% else %}
                    <p>Standard amenities included</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Catering Menus Section -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="section-title">
                    <i class="fas fa-utensils me-2"></i>Catering Menus
                    <span class="badge bg-secondary ms-2">
                        {% if catering_menus %}{{ catering_menus|length }}{% else %}3{% endif %} options
                    </span>
                </h3>
                
                {% if catering_menus %}
                <!-- Dynamic catering menus from database -->
                <div class="row">
                    {% for menu in catering_menus %}
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option">
                            {% if menu.images.exists %}
                            <img src="{{ menu.images.first.image.url }}" class="card-img-top" alt="{{ menu.name }}">
                            {% else %}
                            <img src="https://via.placeholder.com/400x200/CCCCCC/666666?text=Catering" class="card-img-top" alt="Catering">
                            {% endif %}
                            <div class="card-body">
                                <h5 class="card-title">{{ menu.name }}</h5>
                                <p class="card-text">{{ menu.description|truncatewords:20 }}</p>
                                
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="price-badge">
                                        <i class="fas fa-rupee-sign"></i> {{ menu.price_per_person }}/person
                                    </span>
                                    {% if menu.is_vegetarian %}
                                    <span class="badge bg-success">Vegetarian</span>
                                    {% endif %}
                                </div>
                                
                                <p class="mb-2">
                                    <i class="fas fa-users me-1"></i>
                                    For {{ menu.min_guests }} - {{ menu.max_guests }} guests
                                </p>
                                
                                <button class="btn btn-primary-custom w-100 select-menu-btn"
                                        data-menu-id="{{ menu.id }}"
                                        data-menu-name="{{ menu.name }}"
                                        data-menu-price="{{ menu.price_per_person }}">
                                    <i class="fas fa-check me-1"></i>Select Menu
                                </button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <!-- FALLBACK: Hardcoded catering options with images -->
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option" onclick="selectFallbackCatering('vegetarian', this)">
                            <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 class="card-img-top" alt="Vegetarian Delight Menu">
                            <div class="card-body">
                                <h5 class="card-title">Vegetarian Delight</h5>
                                <p class="card-text">A complete vegetarian feast with 5 starters, 8 main course dishes, 3 bread varieties, and 4 dessert options.</p>
                                
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="price-badge">
                                        <i class="fas fa-rupee-sign"></i> 15,000
                                    </span>
                                    <span class="badge bg-success">Vegetarian</span>
                                </div>
                                
                                <p class="mb-2">
                                    <i class="fas fa-users me-1"></i>
                                    For 50 - 500 guests
                                </p>
                                
                                <button class="btn btn-primary-custom w-100">
                                    <i class="fas fa-check me-1"></i>Select Menu
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option" onclick="selectFallbackCatering('nonveg', this)">
                            <img src="https://images.unsplash.com/photo-1600891964092-4316c288032e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 class="card-img-top" alt="Royal Non-Veg Feast">
                            <div class="card-body">
                                <h5 class="card-title">Royal Non-Veg Feast</h5>
                                <p class="card-text">Exquisite non-vegetarian spread featuring 6 starters, 10 main course dishes including Mughlai specialties.</p>
                                
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="price-badge">
                                        <i class="fas fa-rupee-sign"></i> 22,000
                                    </span>
                                    <span class="badge bg-danger">Non-Veg</span>
                                </div>
                                
                                <p class="mb-2">
                                    <i class="fas fa-users me-1"></i>
                                    For 50 - 500 guests
                                </p>
                                
                                <button class="btn btn-primary-custom w-100">
                                    <i class="fas fa-check me-1"></i>Select Menu
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option" onclick="selectFallbackCatering('fusion', this)">
                            <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 class="card-img-top" alt="Premium Fusion Cuisine">
                            <div class="card-body">
                                <h5 class="card-title">Premium Fusion Cuisine</h5>
                                <p class="card-text">A fusion of Indian and international cuisines with 8 starters, 12 main course options, live counters.</p>
                                
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="price-badge">
                                        <i class="fas fa-rupee-sign"></i> 28,000
                                    </span>
                                    <span class="badge bg-info">Fusion</span>
                                </div>
                                
                                <p class="mb-2">
                                    <i class="fas fa-users me-1"></i>
                                    For 50 - 500 guests
                                </p>
                                
                                <button class="btn btn-primary-custom w-100">
                                    <i class="fas fa-check me-1"></i>Select Menu
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="alert alert-info mt-3">
                    <i class="fas fa-info-circle me-2"></i>
                    Sample catering menus shown. Contact venue for custom options.
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Decoration Packages Section -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="section-title">
                    <i class="fas fa-palette me-2"></i>Decoration Packages
                    <span class="badge bg-secondary ms-2">
                        {% if decoration_packages %}{{ decoration_packages|length }}{% else %}3{% endif %} packages
                    </span>
                </h3>
                
                {% if decoration_packages %}
                <!-- Dynamic decoration packages from database -->
                <div class="row">
                    {% for package in decoration_packages %}
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option">
                            {% if package.images.exists %}
                            <img src="{{ package.images.first.image.url }}" class="card-img-top" alt="{{ package.name }}">
                            {% else %}
                            <img src="https://via.placeholder.com/400x200/CCCCCC/666666?text=Decoration" class="card-img-top" alt="Decoration">
                            {% endif %}
                            <div class="card-body">
                                <h5 class="card-title">{{ package.name }}</h5>
                                <span class="badge bg-warning text-dark mb-2">{{ package.theme }}</span>
                                <p class="card-text">{{ package.description|truncatewords:15 }}</p>
                                
                                <div class="mb-3">
                                    <h4 class="text-primary">
                                        <i class="fas fa-rupee-sign"></i> {{ package.price }}
                                    </h4>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Includes:</h6>
                                    <ul class="list-unstyled small" id="includes-{{ forloop.counter }}">
                                        <li><i class="fas fa-check text-success me-1"></i>{{ package.includes_items }}</li>
                                    </ul>
                                </div>
                                
                                <button class="btn btn-primary-custom w-100 select-package-btn"
                                        data-package-id="{{ package.id }}"
                                        data-package-name="{{ package.name }}"
                                        data-package-price="{{ package.price }}">
                                    <i class="fas fa-check me-1"></i>Select Package
                                </button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <!-- FALLBACK: Hardcoded decoration packages with images -->
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option" onclick="selectFallbackDecoration('classic', this)">
                            <img src="https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 class="card-img-top" alt="Classic Elegance Package">
                            <div class="card-body">
                                <h5 class="card-title">Classic Elegance</h5>
                                <span class="badge bg-warning text-dark mb-2">Traditional</span>
                                <p class="card-text">Traditional decoration with marigold flowers, drapes, and elegant lighting.</p>
                                
                                <div class="mb-3">
                                    <h4 class="text-primary">
                                        <i class="fas fa-rupee-sign"></i> 12,000
                                    </h4>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Includes:</h6>
                                    <ul class="list-unstyled small">
                                        <li><i class="fas fa-check text-success me-1"></i>Mandap Decoration</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Floral Arrangements</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Lighting Setup</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Seating Arrangement</li>
                                    </ul>
                                </div>
                                
                                <button class="btn btn-primary-custom w-100">
                                    <i class="fas fa-check me-1"></i>Select Package
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option" onclick="selectFallbackDecoration('royal', this)">
                            <img src="https://images.unsplash.com/photo-1530103862676-de8c9debad1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 class="card-img-top" alt="Royal Rajasthani Theme">
                            <div class="card-body">
                                <h5 class="card-title">Royal Rajasthani</h5>
                                <span class="badge bg-warning text-dark mb-2">Rajasthani</span>
                                <p class="card-text">Authentic Rajasthani theme with traditional artifacts and vibrant colors.</p>
                                
                                <div class="mb-3">
                                    <h4 class="text-primary">
                                        <i class="fas fa-rupee-sign"></i> 18,000
                                    </h4>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Includes:</h6>
                                    <ul class="list-unstyled small">
                                        <li><i class="fas fa-check text-success me-1"></i>Traditional Artifacts</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Ethnic Drapes</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Cultural Motifs</li>
                                        <li><i class="fas fa-check text-success me-1"></i>LED Lighting</li>
                                    </ul>
                                </div>
                                
                                <button class="btn btn-primary-custom w-100">
                                    <i class="fas fa-check me-1"></i>Select Package
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 fallback-option" onclick="selectFallbackDecoration('modern', this)">
                            <img src="https://images.unsplash.com/photo-1464366400600-7168b8af9bc3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 class="card-img-top" alt="Modern Luxury Package">
                            <div class="card-body">
                                <h5 class="card-title">Modern Luxury</h5>
                                <span class="badge bg-warning text-dark mb-2">Contemporary</span>
                                <p class="card-text">Contemporary decoration with premium floral arrangements and LED effects.</p>
                                
                                <div class="mb-3">
                                    <h4 class="text-primary">
                                        <i class="fas fa-rupee-sign"></i> 25,000
                                    </h4>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Includes:</h6>
                                    <ul class="list-unstyled small">
                                        <li><i class="fas fa-check text-success me-1"></i>Premium Florals</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Crystal Elements</li>
                                        <li><i class="fas fa-check text-success me-1"></i>LED Effects</li>
                                        <li><i class="fas fa-check text-success me-1"></i>Luxury Fabrics</li>
                                    </ul>
                                </div>
                                
                                <button class="btn btn-primary-custom w-100">
                                    <i class="fas fa-check me-1"></i>Select Package
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="alert alert-info mt-3">
                    <i class="fas fa-info-circle me-2"></i>
                    Sample decoration packages shown. Contact venue for custom themes.
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Booking Summary -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow-lg">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-shopping-cart me-2"></i>Your Booking Summary
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h5>Venue</h5>
                                <p class="mb-1"><strong>{{ venue.venue_name }}</strong></p>
                                <p class="text-muted">{{ venue.location }}</p>
                                <h5 class="text-primary">₹{{ venue.pricing }}</h5>
                            </div>
                            
                            <div class="col-md-4">
                                <h5>Selected Catering</h5>
                                <div id="selected-catering">
                                    <p class="text-muted"><i>No menu selected</i></p>
                                </div>
                                <input type="hidden" id="selected_menu_id" value="">
                            </div>
                            
                            <div class="col-md-4">
                                <h5>Selected Decoration</h5>
                                <div id="selected-decoration">
                                    <p class="text-muted"><i>No package selected</i></p>
                                </div>
                                <input type="hidden" id="selected_package_id" value="">
                            </div>
                        </div>
                        
                        <hr>
                        
                        <!-- REPLACED: New Complete Booking button that redirects to confirmation page -->
                        <div class="text-center">
                            <button class="btn btn-success btn-lg px-5" onclick="redirectToConfirmation()">
                                <i class="fas fa-calendar-check me-2"></i>Complete Booking
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- REMOVED: Old Booking Modal - Now redirects to confirmation page -->

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container text-center">
            <p>&copy; 2024 SmartPlot Party Plot Management System</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Fallback selection logic for hardcoded options
        let selectedCatering = null;
        let selectedDecoration = null;
        
        function selectFallbackCatering(type, element) {
            const cards = document.querySelectorAll('.catering-section .fallback-option');
            cards.forEach(card => card.classList.remove('selected-option'));
            element.classList.add('selected-option');
            
            let name, price;
            switch(type) {
                case 'vegetarian':
                    name = 'Vegetarian Delight';
                    price = '15,000';
                    break;
                case 'nonveg':
                    name = 'Royal Non-Veg Feast';
                    price = '22,000';
                    break;
                case 'fusion':
                    name = 'Premium Fusion Cuisine';
                    price = '28,000';
                    break;
            }
            
            document.getElementById('selected-catering').innerHTML = `
                <p><strong>${name}</strong></p>
                <p>₹${price}</p>
            `;
            
            // Update form fields for later use
            window.selectedCateringData = { name, price: price.replace(/,/g, '') };
            selectedCatering = { name, price };
        }
        
        function selectFallbackDecoration(type, element) {
            const cards = document.querySelectorAll('.decoration-section .fallback-option');
            cards.forEach(card => card.classList.remove('selected-option'));
            element.classList.add('selected-option');
            
            let name, price;
            switch(type) {
                case 'classic':
                    name = 'Classic Elegance';
                    price = '12,000';
                    break;
                case 'royal':
                    name = 'Royal Rajasthani';
                    price = '18,000';
                    break;
                case 'modern':
                    name = 'Modern Luxury';
                    price = '25,000';
                    break;
            }
            
            document.getElementById('selected-decoration').innerHTML = `
                <p><strong>${name}</strong></p>
                <p>₹${price}</p>
            `;
            
            // Update form fields for later use
            window.selectedDecorationData = { name, price: price.replace(/,/g, '') };
            selectedDecoration = { name, price };
        }
        
        // Original selection logic for dynamic options
        document.querySelectorAll('.select-menu-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const name = this.dataset.menuName;
                const price = this.dataset.menuPrice;
                
                document.getElementById('selected-catering').innerHTML = `
                    <p><strong>${name}</strong></p>
                    <p>₹${price}/person</p>
                `;
                document.getElementById('selected_menu_id').value = this.dataset.menuId;
                
                // Store selected data
                window.selectedCateringData = { name, price };
                selectedCatering = { name, price };
                
                // Update button styles
                document.querySelectorAll('.select-menu-btn').forEach(b => {
                    b.classList.remove('btn-primary-custom');
                    b.classList.add('btn-outline-primary');
                });
                this.classList.remove('btn-outline-primary');
                this.classList.add('btn-primary-custom');
            });
        });
        
        document.querySelectorAll('.select-package-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const name = this.dataset.packageName;
                const price = this.dataset.packagePrice;
                
                document.getElementById('selected-decoration').innerHTML = `
                    <p><strong>${name}</strong></p>
                    <p>₹${price}</p>
                `;
                document.getElementById('selected_package_id').value = this.dataset.packageId;
                
                // Store selected data
                window.selectedDecorationData = { name, price };
                selectedDecoration = { name, price };
                
                // Update button styles
                document.querySelectorAll('.select-package-btn').forEach(b => {
                    b.classList.remove('btn-primary-custom');
                    b.classList.add('btn-outline-primary');
                });
                this.classList.remove('btn-outline-primary');
                this.classList.add('btn-primary-custom');
            });
        });
        
        // JavaScript-based amenities formatting
        document.addEventListener('DOMContentLoaded', function() {
            // Format amenities if they exist
            const amenitiesContainer = document.getElementById('amenities-container');
            if (amenitiesContainer) {
                const amenitiesText = amenitiesContainer.textContent.trim();
                if (amenitiesText) {
                    const amenitiesArray = amenitiesText.split(',').map(item => item.trim()).filter(item => item);
                    if (amenitiesArray.length > 0) {
                        amenitiesContainer.innerHTML = `
                            <div class="row">
                                ${amenitiesArray.map(amenity => `
                                    <div class="col-md-4">
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="fas fa-check text-success me-2"></i>
                                            <span>${amenity}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    }
                }
            }
            
            // Format decoration includes items
            document.querySelectorAll('[id^="includes-"]').forEach(container => {
                const originalText = container.textContent.trim();
                if (originalText && originalText.includes(',')) {
                    const itemsArray = originalText.split(',').map(item => item.trim()).filter(item => item);
                    if (itemsArray.length > 1) {
                        container.innerHTML = itemsArray.map(item => `
                            <li><i class="fas fa-check text-success me-1"></i>${item}</li>
                        `).join('');
                    }
                }
            });
        });
        
        // NEW: Redirect to confirmation page
        function redirectToConfirmation() {
            if (!selectedCatering && !selectedDecoration) {
                Swal.fire({
                    icon: 'warning',
                    title: 'No Selections',
                    text: 'Please select at least one catering menu or decoration package before booking.',
                    confirmButtonColor: '#c8a97e'
                });
                return;
            }
            
            // Show a nice form using SweetAlert2 instead of prompt
            Swal.fire({
                title: 'Enter Booking Details',
                html: `
                    <div style="text-align: left;">
                        <div class="mb-3">
                            <label style="font-weight: 600; margin-bottom: 5px; display: block;">Event Date *</label>
                            <input type="date" id="swal_booking_date" class="swal2-input" value="${new Date().toISOString().split('T')[0]}" min="${new Date().toISOString().split('T')[0]}" style="width: 100%;">
                        </div>
                        <div class="mb-3">
                            <label style="font-weight: 600; margin-bottom: 5px; display: block;">Event Type</label>
                            <select id="swal_event_type" class="swal2-input" style="width: 100%;">
                                <option value="wedding">Wedding</option>
                                <option value="birthday">Birthday</option>
                                <option value="corporate">Corporate Event</option>
                                <option value="engagement">Engagement</option>
                                <option value="anniversary">Anniversary</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label style="font-weight: 600; margin-bottom: 5px; display: block;">Number of Guests</label>
                            <input type="number" id="swal_guest_count" class="swal2-input" value="100" min="1" max="{{ venue.capacity }}" style="width: 100%;">
                        </div>
                        <div class="mb-3">
                            <label style="font-weight: 600; margin-bottom: 5px; display: block;">Special Requests (Optional)</label>
                            <textarea id="swal_special_requests" class="swal2-input" rows="2" style="width: 100%;"></textarea>
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: 'Continue',
                cancelButtonText: 'Cancel',
                confirmButtonColor: '#397B53',
                cancelButtonColor: '#dc3545',
                preConfirm: () => {
                    const bookingDate = document.getElementById('swal_booking_date').value;
                    const eventType = document.getElementById('swal_event_type').value;
                    const guestCount = document.getElementById('swal_guest_count').value;
                    const specialRequests = document.getElementById('swal_special_requests').value;
                    
                    if (!bookingDate) {
                        Swal.showValidationMessage('Please select an event date');
                        return false;
                    }
                    
                    const today = new Date().toISOString().split('T')[0];
                    if (bookingDate < today) {
                        Swal.showValidationMessage('Please select a future date');
                        return false;
                    }
                    
                    if (!guestCount || guestCount < 1 || guestCount > {{ venue.capacity }}) {
                        Swal.showValidationMessage(`Please enter a valid guest count between 1 and {{ venue.capacity }}`);
                        return false;
                    }
                    
                    return { bookingDate, eventType, guestCount, specialRequests };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const { bookingDate, eventType, guestCount, specialRequests } = result.value;
                    
                    // Build URL parameters
                    const params = new URLSearchParams({
                        venue_id: '{{ venue.id }}',
                        venue_name: '{{ venue.venue_name }}',
                        venue_price: '{{ venue.pricing }}',
                        selected_catering: selectedCatering ? selectedCatering.name : '',
                        selected_catering_price: selectedCatering ? selectedCatering.price.replace(/,/g, '') : '0',
                        selected_decoration: selectedDecoration ? selectedDecoration.name : '',
                        selected_decoration_price: selectedDecoration ? selectedDecoration.price.replace(/,/g, '') : '0',
                        booking_date: bookingDate,
                        event_type: eventType,
                        guest_count: guestCount,
                        special_requests: specialRequests || ''
                    });
                    
                    // Redirect to confirmation page
                    window.location.href = `{% url 'booking_confirmation' %}?${params.toString()}`;
                }
            });
        }
    </script>
</body>
</html>